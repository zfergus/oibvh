# Common settings
BasedOnStyle:    Google
TabWidth:        4
IndentWidth:     4
UseTab:          Never
ColumnLimit:     120

---
Language: Cpp
DisableFormat:   false
Standard: Cpp11
Cpp11BracedListStyle: true

AccessModifierOffset: -4

AlignOperands: DontAlign

AllowAllParametersOfDeclarationOnNextLine: true
AllowShortBlocksOnASingleLine: Never
AllowShortCaseLabelsOnASingleLine: false
AllowShortFunctionsOnASingleLine: None
AllowShortIfStatementsOnASingleLine: Never
AllowShortLoopsOnASingleLine: false
AllowShortLambdasOnASingleLine: All

BinPackArguments: false
BinPackParameters: false

# Configure each individual brace in BraceWrapping
BreakBeforeBraces: Custom
# Control of individual brace wrapping cases
BraceWrapping: {
    AfterCaseLabel: 'true'
    AfterClass: 'true'
    AfterControlStatement: 'true'
    AfterEnum : 'true'
    AfterFunction : 'true'
    AfterNamespace : 'true'
    AfterStruct : 'true'
    AfterUnion : 'true'
    BeforeCatch : 'true'
    BeforeElse : 'true'
    AfterExternBlock : 'true'
    SplitEmptyFunction : 'true'
    SplitEmptyRecord : 'true'
    SplitEmptyNamespace : 'true'
}

BreakAfterJavaFieldAnnotations: true
BreakBeforeInheritanceComma: false
BreakBeforeBinaryOperators: None
BreakBeforeTernaryOperators: true
BreakConstructorInitializersBeforeComma: true
BreakStringLiterals: true
# BreakConstructorInitializers not work in my project.
BreakConstructorInitializers: BeforeColon

CommentPragmas: '^ IWYU pragma:'
CompactNamespaces: false
ConstructorInitializerAllOnOneLineOrOnePerLine: false
ConstructorInitializerIndentWidth: 4
ContinuationIndentWidth: 4
SpaceBeforeCpp11BracedList: false
DerivePointerAlignment: false
ExperimentalAutoDetectBinPacking: false
ForEachMacros:   [ foreach, Q_FOREACH, BOOST_FOREACH ]
IndentCaseLabels: false
FixNamespaceComments: true
IndentWrappedFunctionNames: false
KeepEmptyLinesAtTheStartOfBlocks: true
MacroBlockBegin: ''
MacroBlockEnd:   ''
JavaScriptQuotes: Double
MaxEmptyLinesToKeep: 1
NamespaceIndentation: None
ObjCBlockIndentWidth: 4
ObjCSpaceAfterProperty: true
ObjCSpaceBeforeProtocolList: true
PenaltyBreakBeforeFirstCallParameter: 19
PenaltyBreakComment: 100
PenaltyBreakFirstLessLess: 120
PenaltyBreakString: 1000

PenaltyExcessCharacter: 1000000
PenaltyReturnTypeOnItsOwnLine: 60
PointerAlignment: Left
SpaceAfterCStyleCast: false
SpaceBeforeAssignmentOperators: true
SpaceBeforeCtorInitializerColon: true
SpaceInEmptyParentheses: false
SpacesBeforeTrailingComments: 1
SpacesInAngles: false
SpacesInContainerLiterals: true
SpacesInCStyleCastParentheses: false
SpacesInParentheses: false
SpacesInSquareBrackets: false
SpaceAfterTemplateKeyword: true
SpaceBeforeInheritanceColon: true

SortUsingDeclarations: true
SortIncludes: true

# Comments are for developers, they should arrange them
ReflowComments: true

IncludeBlocks: Regroup
IncludeCategories:
  # by default, the main header of a cpp will get priority 0
  # regex here are sorted by search pattern, not by sort priority
  - Regex:           "^<oibvh\/[^/]*>" # this libraries
    Priority:        2    # internal library group
    SortPriority:    2
    CaseSensitive:   true
  - Regex:           "^<oibvh\/.*\/.*>" # this libraries
    Priority:        2    # internal library group
    SortPriority:    3
    CaseSensitive:   true
  - Regex:           "^<(.*\\.h[px]*)|(Eigen\/.*)>"
    Priority:        4    # libraries (because they end in .h)
    SortPriority:    4
    CaseSensitive:   false
  - Regex:           "^<.*"
    Priority:        5    # system (without .h, because that is captured by the other group)
    SortPriority:    5
    CaseSensitive:   false
  - Regex:           ".*" # catch-all for internal files
    Priority:        1    # internal file group
    SortPriority:    1
    CaseSensitive:   true

IndentPPDirectives: AfterHash
